{"ast":null,"code":"import _defineProperty from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/src/components/SignUp/index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\n\nvar SignUpPage = function SignUpPage() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \"SignUp\"), React.createElement(SignUpForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }));\n};\n\nvar INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null\n};\nvar ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\nvar ERROR_MSG_ACCOUNT_EXISTS = \"\\n  An account with this E-Mail address already exists.\\n  Try to login with this account instead. If you think the\\n  account is already used from one of the social logins, try\\n  to sign in with one of them. Afterward, associate your accounts\\n  on your personal account page.\\n\";\n\nvar SignUpFormBase =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUpFormBase, _Component);\n\n  function SignUpFormBase(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpFormBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpFormBase).call(this, props));\n\n    _this.onSubmit = function (event) {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          passwordOne = _this$state.passwordOne,\n          isAdmin = _this$state.isAdmin;\n      var roles = {};\n\n      if (isAdmin) {\n        roles[ROLES.ADMIN] = ROLES.ADMIN;\n      }\n\n      _this.props.firebase.doCreateUserWithEmailAndPassword(email, passwordOne).then(function (authUser) {\n        // Create a user in your Firebase realtime database\n        return _this.props.firebase.user(authUser.user.uid).set({\n          username: username,\n          email: email,\n          roles: roles\n        });\n      }).then(function () {\n        return _this.props.firebase.doSendEmailVerification();\n      }).then(function () {\n        _this.setState(_objectSpread({}, INITIAL_STATE));\n\n        _this.props.history.push(ROUTES.HOME);\n      }).catch(function (error) {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        _this.setState({\n          error: error\n        });\n      });\n\n      event.preventDefault();\n    };\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.onChangeCheckbox = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.checked));\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(SignUpFormBase, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          passwordOne = _this$state2.passwordOne,\n          passwordTwo = _this$state2.passwordTwo,\n          isAdmin = _this$state2.isAdmin,\n          error = _this$state2.error;\n      var isInvalid = passwordOne !== passwordTwo || passwordOne === '' || email === '' || username === '';\n      return React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"username\",\n        value: username,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Full Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        value: email,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Email Address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"passwordOne\",\n        value: passwordOne,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"passwordTwo\",\n        value: passwordTwo,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Admin:\", React.createElement(\"input\", {\n        name: \"isAdmin\",\n        type: \"checkbox\",\n        checked: isAdmin,\n        onChange: this.onChangeCheckbox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        disabled: isInvalid,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Sign Up\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, error.message));\n    }\n  }]);\n\n  return SignUpFormBase;\n}(Component);\n\nvar SignUpLink = function SignUpLink() {\n  return React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: ROUTES.SIGN_UP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Sign Up\"));\n};\n\nvar SignUpForm = compose(withRouter, withFirebase)(SignUpFormBase);\nexport default SignUpPage;\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["/Users/camilledesoubrie/Documents/applications/react-firebase-authentication/src/components/SignUp/index.js"],"names":["React","Component","Link","withRouter","compose","withFirebase","ROUTES","ROLES","SignUpPage","INITIAL_STATE","username","email","passwordOne","passwordTwo","isAdmin","error","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignUpFormBase","props","onSubmit","event","state","roles","ADMIN","firebase","doCreateUserWithEmailAndPassword","then","authUser","user","uid","set","doSendEmailVerification","setState","history","push","HOME","catch","code","message","preventDefault","onChange","target","name","value","onChangeCheckbox","checked","isInvalid","SignUpLink","SIGN_UP","SignUpForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\n\nconst SignUpPage = () => (\n\t<div>\n\t\t<h1>SignUp</h1>\n\t\t<SignUpForm />\n\t</div>\n);\n\nconst INITIAL_STATE = {\n\tusername    : '',\n\temail       : '',\n\tpasswordOne : '',\n\tpasswordTwo : '',\n\tisAdmin     : false,\n\terror       : null\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = { ...INITIAL_STATE };\n\t}\n\n\tonSubmit = (event) => {\n\t\tconst { username, email, passwordOne, isAdmin } = this.state;\n\t\tconst roles = {};\n\n\t\tif (isAdmin) {\n\t\t\troles[ROLES.ADMIN] = ROLES.ADMIN;\n\t\t}\n\n\t\tthis.props.firebase\n\t\t\t.doCreateUserWithEmailAndPassword(email, passwordOne)\n\t\t\t.then((authUser) => {\n\t\t\t\t// Create a user in your Firebase realtime database\n\t\t\t\treturn this.props.firebase.user(authUser.user.uid).set({\n\t\t\t\t\tusername,\n\t\t\t\t\temail,\n\t\t\t\t\troles\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.props.firebase.doSendEmailVerification();\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ ...INITIAL_STATE });\n\t\t\t\tthis.props.history.push(ROUTES.HOME);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t\t\t\terror.message = ERROR_MSG_ACCOUNT_EXISTS;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ error });\n\t\t\t});\n\n\t\tevent.preventDefault();\n\t};\n\n\tonChange = (event) => {\n\t\tthis.setState({ [event.target.name]: event.target.value });\n\t};\n\n\tonChangeCheckbox = (event) => {\n\t\tthis.setState({ [event.target.name]: event.target.checked });\n\t};\n\n\trender() {\n\t\tconst { username, email, passwordOne, passwordTwo, isAdmin, error } = this.state;\n\n\t\tconst isInvalid = passwordOne !== passwordTwo || passwordOne === '' || email === '' || username === '';\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<input name=\"username\" value={username} onChange={this.onChange} type=\"text\" placeholder=\"Full Name\" />\n\t\t\t\t<input name=\"email\" value={email} onChange={this.onChange} type=\"text\" placeholder=\"Email Address\" />\n\t\t\t\t<input\n\t\t\t\t\tname=\"passwordOne\"\n\t\t\t\t\tvalue={passwordOne}\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tname=\"passwordTwo\"\n\t\t\t\t\tvalue={passwordTwo}\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Confirm Password\"\n\t\t\t\t/>\n\t\t\t\t<label>\n\t\t\t\t\tAdmin:\n\t\t\t\t\t<input name=\"isAdmin\" type=\"checkbox\" checked={isAdmin} onChange={this.onChangeCheckbox} />\n\t\t\t\t</label>\n\t\t\t\t<button disabled={isInvalid} type=\"submit\">\n\t\t\t\t\tSign Up\n\t\t\t\t</button>\n\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nconst SignUpLink = () => (\n\t<p>\n\t\tDon't have an account? <Link to={ROUTES.SIGN_UP}>Sign Up</Link>\n\t</p>\n);\n\nconst SignUpForm = compose(withRouter, withFirebase)(SignUpFormBase);\n\nexport default SignUpPage;\n\nexport { SignUpForm, SignUpLink };\n"]},"metadata":{},"sourceType":"module"}